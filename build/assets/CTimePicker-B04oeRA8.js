import{r as c,R as t,g as M,P as n,_ as fn,f as R}from"./index-DZpHvrBU.js";import{g as Ke,c as w}from"./index.esm-BpGp-FB7.js";import{C as dn}from"./CConditionalPortal-WNlhJkLX.js";import{u as mn,i as vn}from"./isRTL-DD8tPX4Y.js";import{I as Ue}from"./ProBadge-BEAnkJE8.js";var _=c.forwardRef(function(e,i){var o=e.children,l=e.className,u=e.container,s=u===void 0?"dropdown":u,m=e.disabled,k=e.dropdownClassNames,h=e.footer,v=e.footerContent,a=e.onHide,p=e.onShow,y=e.portal,K=y===void 0?!0:y,F=e.toggler,P=e.visible,E=c.useRef(null),L=Ue(i,E),T=c.useRef(null),D=c.useRef(null),U=mn(),j=U.initPopper,ee=U.destroyPopper,G=c.useState(P),O=G[0],H=G[1],C={placement:vn(E.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};c.useEffect(function(){H(P)},[P]),c.useEffect(function(){return s!=="inline"&&O&&(p&&p(),window.addEventListener("mouseup",J),window.addEventListener("keyup",W),D.current&&T.current&&j(D.current,T.current,C)),function(){a&&a(),window.removeEventListener("mouseup",J),window.removeEventListener("keyup",W),ee()}},[O]);var W=function(V){V.key==="Escape"&&H(!1)},J=function(V){E.current&&E.current.contains(V.target)||T.current&&T.current.contains(V.target)||H(!1)};switch(s){case"inline":return t.createElement("div",{className:M("picker",l),ref:L},o);default:return t.createElement("div",{className:M(l,{show:O}),onClick:function(){return!m&&H(!0)},ref:L},F&&t.isValidElement(F)&&t.cloneElement(F,{ref:D}),t.createElement(dn,{portal:K},t.createElement("div",{className:M(k,{show:K&&O}),ref:T},o,h&&v)))}});_.displayName="CPicker";_.propTypes={children:n.node,className:n.string,container:n.oneOf(["dropdown","inline"]),disabled:n.bool,dropdownClassNames:n.string,footer:n.bool,footerContent:n.node,onHide:n.func,onShow:n.func,portal:n.bool,toggler:n.node,visible:n.bool};var pn=function(e){var i=c.useState(!1),o=i[0],l=i[1];return c.useEffect(function(){var u=new IntersectionObserver(function(s){var m=s[0];return l(m.isIntersecting)});return e.current&&u.observe(e.current),function(){return u.disconnect()}},[]),o},A=c.forwardRef(function(e,i){var o=e.elements,l=e.onClick,u=e.selected,s=c.useRef(!0),m=c.useRef(null),k=Ue(i,m),h=pn(m);c.useEffect(function(){var a,p,y=(a=m.current)===null||a===void 0?void 0:a.querySelector(".selected");h&&y&&y instanceof HTMLElement&&((p=m.current)===null||p===void 0||p.scrollTo({top:y.offsetTop,behavior:s.current?"auto":"smooth"})),h&&(s.current=!1)},[h,u]);var v=function(a,p){(a.code==="Space"||a.key==="Enter")&&(a.preventDefault(),l&&l(p))};return t.createElement("div",{className:"time-picker-roll-col",ref:k},o.map(function(a,p){return t.createElement("div",{className:M("time-picker-roll-cell",{selected:a.value===u}),key:p,onClick:function(){return l&&l(a.value)},onKeyDown:function(y){return v(y,a.value)},role:"button",tabIndex:0},a.label)}))});A.propTypes={elements:n.array.isRequired,onClick:n.func,selected:n.oneOfType([n.number,n.string])};A.displayName="CTimePickerRollCol";var gn=function(e,i){return e==="am"&&i===12?0:e==="am"?i:e==="pm"&&i===12?12:i+12},bn=function(e){return e%12||12},ae=function(e){return e?e instanceof Date?e:new Date("1970-01-01 ".concat(e)):null},Fe=function(e,i){return e.toLocaleTimeString(i).includes("AM")?"am":e.toLocaleTimeString(i).includes("PM")||e.getHours()>=12?"pm":"am"},le=function(e,i,o){var l=new Date,u=new Intl.DateTimeFormat(i,{hour:"numeric",minute:"2-digit",second:"2-digit"});return e.map(function(s){var m;return o==="hour"&&l.setHours(s),o==="minute"&&l.setMinutes(s),o==="second"&&l.setSeconds(s),{value:s,label:((m=u.formatToParts(l).find(function(k){return k.type===o}))===null||m===void 0?void 0:m.value)||""}})},yn=function(e,i,o,l,u){i===void 0&&(i="auto"),o===void 0&&(o=[]),l===void 0&&(l=[]),u===void 0&&(u=[]);var s=i==="auto"&&je(e)||i===!0,m=Array.isArray(o)&&o.length>0?o:typeof o=="function"?Array.from({length:s?12:24},function(v,a){return s?a+1:a}).filter(function(v){return o(v)}):Array.from({length:s?12:24},function(v,a){return s?a+1:a}),k=Array.isArray(l)&&l.length>0?l:typeof l=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return l(v)}):Array.from({length:60},function(v,a){return a}),h=Array.isArray(u)&&u.length>0?u:typeof u=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return u(v)}):Array.from({length:60},function(v,a){return a});return{listOfHours:le(m,e,"hour"),listOfMinutes:le(k,e,"minute"),listOfSeconds:le(h,e,"second"),hour12:s}},Le=function(e,i,o){return o===void 0&&(o="auto"),e?o==="auto"&&je(i)||o===!0?bn(e.getHours()):e.getHours():""},qe=function(e){return e?e.getMinutes():""},xe=function(e){return e?e.getSeconds():""},je=function(e){return["am","AM","pm","PM"].some(function(i){return new Date().toLocaleString(e).includes(i)})},kn=function(e){var i=new Date("1970-01-01 ".concat(e));return i instanceof Date&&i.getTime()},hn=function(e,i){var o=c.useRef();return c.useCallback(function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var s=function(){clearTimeout(o.current),e.apply(void 0,l)};clearTimeout(o.current),o.current=setTimeout(s,i)},[e,i])},ce,ue,se,fe,de,me,Ge=c.forwardRef(function(e,i){var o,l,u=e.ampm,s=u===void 0?"auto":u,m=e.cancelButton,k=m===void 0?"Cancel":m,h=e.cancelButtonColor,v=h===void 0?"primary":h,a=e.cancelButtonSize,p=a===void 0?"sm":a,y=e.cancelButtonVariant,K=y===void 0?"ghost":y,F=e.className,P=e.cleaner,E=P===void 0?!0:P,L=e.confirmButton,T=L===void 0?"OK":L,D=e.confirmButtonColor,U=D===void 0?"primary":D,j=e.confirmButtonSize,ee=j===void 0?"sm":j,G=e.confirmButtonVariant,O=e.container,H=O===void 0?"dropdown":O,C=e.disabled,W=e.feedback,J=e.feedbackInvalid,V=e.feedbackValid,ve=e.footer,We=ve===void 0?!0:ve,Je=e.hours,pe=e.id,ge=e.indicator,ne=ge===void 0?!0:ge,be=e.inputOnChangeDelay,Qe=be===void 0?750:be,Xe=e.inputReadOnly,te=e.invalid,Ye=e.label,ye=e.locale,I=ye===void 0?"default":ye,ke=e.minutes,Q=ke===void 0?!0:ke,Ze=e.name,X=e.onTimeChange,he=e.onHide,Ce=e.onShow,Ee=e.placeholder,$e=Ee===void 0?"Select time":Ee,Te=e.portal,_e=Te===void 0?!1:Te,en=e.required,Se=e.seconds,Y=Se===void 0?!0:Se,we=e.size,nn=e.text,Z=e.time,tn=e.tooltipFeedback,N=e.valid,Oe=e.variant,Ne=Oe===void 0?"roll":Oe,rn=e.visible,Be=fn(e,["ampm","cancelButton","cancelButtonColor","cancelButtonSize","cancelButtonVariant","className","cleaner","confirmButton","confirmButtonColor","confirmButtonSize","confirmButtonVariant","container","disabled","feedback","feedbackInvalid","feedbackValid","footer","hours","id","indicator","inputOnChangeDelay","inputReadOnly","invalid","label","locale","minutes","name","onTimeChange","onHide","onShow","placeholder","portal","required","seconds","size","text","time","tooltipFeedback","valid","variant","visible"]),q=c.useRef(),B=c.useRef(null),Re=c.useState(ae(Z)),d=Re[0],x=Re[1],Pe=c.useState(null),De=Pe[0],on=Pe[1],He=c.useState(N??(te===!0?!1:void 0)),$=He[0],re=He[1],Ve=c.useState(d?Fe(new Date(d),I):"am"),oe=Ve[0],an=Ve[1],Ie=c.useState(rn),ie=Ie[0],z=Ie[1],ze=c.useState({listOfHours:[],listOfMinutes:[],listOfSeconds:[],hour12:!1}),f=ze[0],ln=ze[1];c.useEffect(function(){x(Z?ae(Z):null)},[Z]),c.useEffect(function(){re(N??(te===!0?!1:void 0))},[N,te]),c.useEffect(function(){ln(yn(I,s,Je,Q,Y)),B.current&&(B.current.value=d?d.toLocaleTimeString(I,R(R({hour12:f&&f.hour12,hour:"numeric"},Q&&{minute:"numeric"}),Y&&{second:"numeric"})):""),d&&an(Fe(new Date(d),I))},[d]),c.useEffect(function(){B.current&&B.current.form&&(q.current=B.current.form)},[B]),c.useEffect(function(){q.current&&(q.current.addEventListener("submit",function(r){setTimeout(function(){return Me(r.target)})}),Me(q.current))},[q,d]);var Ae=function(r){r.stopPropagation(),x(null),X&&X(null)},Me=function(r){if(r.classList.contains("was-validated")){if(d)return re(!0);re(!1)}},cn=hn(function(r){return kn(r)&&x(ae(r))},Qe),S=function(r,g){var b=d||new Date("1970-01-01");r==="toggle"&&(g==="am"&&b.setHours(b.getHours()-12),g==="pm"&&b.setHours(b.getHours()+12)),r==="hours"&&(f&&f.hour12?b.setHours(gn(oe,Number.parseInt(g))):b.setHours(Number.parseInt(g))),r==="minutes"&&b.setMinutes(Number.parseInt(g)),r==="seconds"&&b.setSeconds(Number.parseInt(g)),x(new Date(b)),X&&X(b.toTimeString(),b.toLocaleTimeString(),b)},un=function(){return t.createElement("div",{className:"time-picker-input-group"},t.createElement("input",{autoComplete:"off",className:"time-picker-input",disabled:C,id:pe,name:Ze,onChange:function(r){return cn(r.target.value)},placeholder:$e,readOnly:Xe,required:en,ref:B}),ne&&(typeof ne=="boolean"?t.createElement("div",R({className:"time-picker-indicator"},C!==!1&&{onClick:function(){return z(!ie)},onKeyDown:function(r){r.key==="Enter"&&z(!ie)},tabIndex:0})):ne),E&&d&&(typeof E=="boolean"?t.createElement("div",{className:"time-picker-cleaner",onClick:function(r){return Ae(r)}}):t.isValidElement(E)&&t.cloneElement(E,{onClick:function(r){return Ae(r)}})))},sn=function(){return t.createElement(t.Fragment,null,t.createElement("span",{className:"time-picker-inline-icon"}),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("hours",r.target.value)},value:Le(d,I)},f&&f.listOfHours.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)})),Q&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("minutes",r.target.value)},value:qe(d)},f&&f.listOfMinutes.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)}))),Y&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("seconds",r.target.value)},value:xe(d)},f&&f.listOfSeconds.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)}))),f&&f.hour12&&t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("toggle",r.target.value)},value:oe},t.createElement("option",{value:"am"},"AM"),t.createElement("option",{value:"pm"},"PM")))};return t.createElement(Ke,{describedby:Be["aria-describedby"],feedback:W,feedbackInvalid:J,feedbackValid:V,id:pe,invalid:$===!1,label:Ye,text:nn,tooltipFeedback:tn,valid:$},t.createElement(_,R({className:M("time-picker",(o={},o["time-picker-".concat(we)]=we,o.disabled=C,o["is-invalid"]=$===!1,o["is-valid"]=$,o),F),container:H,disabled:C,dropdownClassNames:"time-picker-dropdown",footer:We,footerContent:t.createElement("div",{className:"time-picker-footer"},k&&t.createElement(w,{color:v,size:p,variant:K,onClick:function(){De&&x(new Date(De)),z(!1)}},k),T&&t.createElement(w,{color:U,size:ee,variant:G,onClick:function(){z(!1)}},T)),onHide:function(){z(!1),he&&he()},onShow:function(){d&&on(new Date(d)),z(!0),Ce&&Ce()},portal:_e,toggler:un(),visible:ie},Be,{ref:i}),t.createElement("div",{className:M("time-picker-body",(l={},l["time-picker-roll"]=Ne==="roll",l))},Ne==="select"?t.createElement(sn,null):t.createElement(t.Fragment,null,t.createElement(A,{elements:f&&f.listOfHours,onClick:function(r){return S("hours",r.toString())},selected:Le(d,I,s)}),Q&&t.createElement(A,{elements:f&&f.listOfMinutes,onClick:function(r){return S("minutes",r.toString())},selected:qe(d)}),Y&&t.createElement(A,{elements:f&&f.listOfSeconds,onClick:function(r){return S("seconds",r.toString())},selected:xe(d)}),f&&f.hour12&&t.createElement(A,{elements:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],onClick:function(r){return S("toggle",r)},selected:oe})))))});Ge.propTypes=R(R(R({},Ke.propTypes),_.propTypes),{ampm:n.oneOfType([n.oneOf(["auto"]),n.bool]),cancelButton:n.oneOfType([n.bool,n.node]),cancelButtonColor:(ce=w.propTypes)===null||ce===void 0?void 0:ce.color,cancelButtonSize:(ue=w.propTypes)===null||ue===void 0?void 0:ue.size,cancelButtonVariant:(se=w.propTypes)===null||se===void 0?void 0:se.variant,className:n.string,confirmButton:n.oneOfType([n.bool,n.node]),confirmButtonColor:(fe=w.propTypes)===null||fe===void 0?void 0:fe.color,confirmButtonSize:(de=w.propTypes)===null||de===void 0?void 0:de.size,confirmButtonVariant:(me=w.propTypes)===null||me===void 0?void 0:me.variant,hours:n.oneOfType([n.arrayOf(n.number.isRequired),n.func]),id:n.string,inputOnChangeDelay:n.number,locale:n.string,minutes:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),name:n.string,onTimeChange:n.func,required:n.bool,seconds:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),time:n.oneOfType([n.instanceOf(Date),n.string]),variant:n.oneOf(["roll","select"])});Ge.displayName="CTimePicker";export{_ as C,Ge as a,hn as u};
