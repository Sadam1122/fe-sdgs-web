import{r as a,_ as ae,R as i,f as q,P as t,g as Y,k as y,j as u}from"./index-DZpHvrBU.js";import{I as vt,a2 as bt,D as Ve}from"./ProBadge-BEAnkJE8.js";import{g as Xe}from"./index.esm-BpGp-FB7.js";import{C as me,a as M}from"./CRow-BSjscmTV.js";import{C as Ge,a as Ue}from"./CCardBody-pRKNkKqE.js";import{C as Be}from"./CCardHeader-B9SVA8Kh.js";import{C as ht}from"./CConditionalPortal-WNlhJkLX.js";import{u as gt,i as yt}from"./isRTL-DD8tPX4Y.js";import{g as ze}from"./getNextActiveElement-A4UnslJ5.js";var Ze=function(e){return e&&e.map(function(o,n){return o.options?i.createElement("optgroup",{label:o.label,key:n},Ze(o.options)):i.createElement("option",{value:o.value,key:n,disabled:o.disabled},o.label)})},ve=a.forwardRef(function(e,o){var n=e.id,f=e.name,l=e.options,s=ae(e,["id","name","options"]);return i.createElement("select",q({id:n},n&&!f&&{name:"".concat(n,"-multi-select")},f&&{name:f},{tabIndex:-1,style:{display:"none"}},s,{ref:o}),l&&Ze(l))});ve.propTypes={id:t.string,name:t.string,options:t.array,value:t.oneOfType([t.number,t.string,t.arrayOf(t.string.isRequired)])};ve.displayName="CMultiSelectNativeSelect";var be=a.forwardRef(function(e,o){var n=e.children,f=e.className,l=e.visibleItems,s=e.onScroll,v=ae(e,["children","className","visibleItems","onScroll"]),p=a.useRef(null),C=a.useRef(null),g=vt(o,p),h=a.useState(Math.floor(l/2)),d=h[0],w=h[1],E=a.useState(1),k=E[0],j=E[1],O=a.useState(0),c=O[0],x=O[1],N=a.useState(i.Children.count(n)),b=N[0],z=N[1],J=a.useState(0),K=J[0],te=J[1],Q=a.useState(l*c+2*K),V=Q[0],re=Q[1],ne=a.useState(b*c+2*K),le=ne[0],ie=ne[1];a.useEffect(function(){p.current&&p.current.scrollTop,p.current&&te(Number.parseFloat(getComputedStyle(p.current).paddingTop))}),a.useEffect(function(){z(i.Children.count(n))},[n]),a.useEffect(function(){re(Math.min(l,b)*c+2*K)},[c,b,K,l]),a.useEffect(function(){ie(b*c),p.current&&p.current.scrollTop},[c,b]),a.useEffect(function(){w(Math.floor(l/2))},[l]);var se=function(A){var D=c&&Math.max(Math.ceil(A/c),1);j(D),s&&s(D)};return i.createElement("div",q({className:Y("virtual-scroller",f),onScroll:function(A){return se(A.target.scrollTop)},style:{height:V,overflowY:"auto"},ref:g},v),i.createElement("div",{className:"virtual-scroller-content",style:{height:le},ref:C},i.Children.map(n,function(A,D){if(i.isValidElement(A)&&D+1>Math.max(k-d,0)&&D+1<=k+l+d)return i.cloneElement(A,{className:Y(A.props.className,{"virtual-scroller-item-preload":D+1>k+l||D+1<k}),key:D,style:q({},k>d&&{transform:"translateY(".concat((k-d)*c,"px)")}),ref:function(H){return H&&H.offsetHeight&&x(H.offsetHeight+Number.parseFloat(getComputedStyle(H).marginTop)+Number.parseFloat(getComputedStyle(H).marginBottom))}})})))});be.propTypes={onScroll:t.func,visibleItems:t.number.isRequired};be.displayName="CVirtualScroller";var St=function(e,o){for(var n=e.toLowerCase().replace(/\s/g,"-"),f=n,l=1;o.some(function(s){return String(s.value)===f});)f="".concat(n,"-").concat(l),l++;return[{value:f,label:e,custom:!0}]},We=function(e,o){if(e.length>0&&o){for(var n=[],f=0,l=o;f<l.length;f++){var s=l[f],v=s.options&&s.options.filter(function(p){return p.label&&p.label.toLowerCase().includes(e.toLowerCase())});(s.label&&s.label.toLowerCase().includes(e.toLowerCase())||v&&v.length>0)&&n.push(Object.assign({},s,v&&v.length>0&&{options:v}))}return n}return o},Ye=function(e,o){for(var n=[],f=0,l=e;f<l.length;f++){var s=l[f];if(Array.isArray(s.options)){var v=s.options,p=ae(s,["options"]);o&&n.push(p),n.push.apply(n,v)}else n.push(s)}return n},wt=function(e,o){for(var n=e.nextElementSibling;n;){if(n.matches(o))return n;n=n.nextElementSibling}},Je=function(e){return Array.from(e.querySelectorAll(".form-multi-select-option:not(.disabled):not(:disabled)"))},xt=function(e,o){for(var n=e.previousElementSibling;n;){if(n.matches(o))return n;n=n.previousElementSibling}},Ct=function(e){return typeof e=="string"&&e==="external"||typeof e=="object"&&e.external===!0},Et=function(e){return typeof e=="string"&&e==="global"||typeof e=="object"&&e.global===!0},Qe=function(e,o,n,f){if(!e)return[o[0]];var l=y(y([],n,!0),o,!0);f&&(l=l.filter(function(h){return!f.some(function(d){return d.value===h.value})}));for(var s=[],v=function(h){s.some(function(d){return d.value===h.value})||s.push(h)},p=0,C=l;p<C.length;p++){var g=C[p];v(g)}return s},he=a.forwardRef(function(e,o){var n=e.loading,f=e.onKeyDown,l=e.onOptionOnClick,s=e.options,v=e.optionsMaxHeight,p=e.optionsStyle,C=e.optionsTemplate,g=e.optionsGroupsTemplate,h=e.searchNoResultsLabel,d=e.selected,w=e.virtualScroller,E=e.visibleItems,k=E===void 0?10:E,j=function(c,x){if((c.code==="Space"||c.key==="Enter")&&(c.preventDefault(),l&&l(x)),c.key==="Down"||c.key==="ArrowDown"){c.preventDefault();var N=c.target,b=wt(N,".form-multi-select-option");b&&b.focus()}if(c.key==="Up"||c.key==="ArrowUp"){c.preventDefault();var N=c.target,z=xt(N,".form-multi-select-option");z&&z.focus()}},O=function(c){return c.length>0?c.map(function(x,N){return"value"in x?i.createElement("div",{className:Y("form-multi-select-option",{"form-multi-select-option-with-checkbox":p==="checkbox","form-multi-selected":d.some(function(b){return b.value===x.value}),disabled:x.disabled}),key:N,onClick:function(){return l&&l(x)},onKeyDown:function(b){return j(b,x)},tabIndex:0},C?C(x):x.label):i.createElement("div",{className:"form-multi-select-optgroup-label",key:N},g?g(x):x.label)}):i.createElement("div",{className:"form-multi-select-options-empty"},h)};return i.createElement(i.Fragment,null,w?i.createElement(be,{className:"form-multi-select-options",onKeyDown:f,visibleItems:k,ref:o},O(s)):i.createElement("div",q({className:"form-multi-select-options",onKeyDown:f},v!=="auto"&&{style:{maxHeight:v,overflow:"scroll"}},{ref:o}),O(s)),n&&i.createElement(bt,null))});he.propTypes={loading:t.bool,onOptionOnClick:t.func,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,searchNoResultsLabel:t.oneOfType([t.string,t.node]),virtualScroller:t.bool,visibleItems:t.number};he.displayName="CMultiSelectOptions";var ge=a.forwardRef(function(e,o){var n=e.children,f=e.disabled,l=e.multiple,s=e.placeholder,v=e.onRemove,p=e.search,C=e.selected,g=C===void 0?[]:C,h=e.selectionType,d=e.selectionTypeCounterText;return i.createElement("span",{className:Y("form-multi-select-selection",{"form-multi-select-selection-tags":l&&h==="tags"}),ref:o},l&&h==="counter"&&!p&&g.length===0&&s,l&&h==="counter"&&!p&&g.length>0&&"".concat(g.length," ").concat(d),l&&h==="tags"&&g.map(function(w,E){if(h==="tags")return i.createElement("span",{className:"form-multi-select-tag",key:E},w.label,!f&&!w.disabled&&i.createElement("button",{className:"form-multi-select-tag-delete",type:"button","aria-label":"Close",onClick:function(){return v&&v(w)}}))}),l&&h==="text"&&g.map(function(w,E){return i.createElement("span",{key:E},w.label,E===g.length-1?"":",","Â ")}),!l&&!p&&g.map(function(w){return w.label})[0],n)});ge.propTypes={children:t.node,disabled:t.bool,multiple:t.bool,onRemove:t.func,placeholder:t.string,search:t.oneOfType([t.bool,t.oneOf(["external","global"]),t.shape({external:t.bool.isRequired,global:t.bool.isRequired})]),selected:t.array,selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string};ge.displayName="CMultiSelectSelection";var Tt=function(e){var o=a.useRef(null),n=a.useRef(null),f=a.useState(!1),l=f[0],s=f[1],v=gt(),p=v.popper,C=v.initPopper,g=v.destroyPopper,h=q({placement:yt(o.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]},e),d=function(){s(!1)},w=function(){s(!0)},E=function(){s(function(c){return!c})},k=function(){p&&p.update()},j=function(c){if(c.key==="Escape"){s(!1);return}if(c.key==="Tab"){if(o.current&&o.current.contains(document.activeElement)||n.current&&n.current.contains(document.activeElement))return;s(!1)}},O=function(c){n.current&&n.current.contains(c.target)||o.current&&o.current.contains(c.target)||s(!1)};return a.useEffect(function(){return l?(window.addEventListener("mouseup",O),window.addEventListener("keyup",j),o.current&&n.current&&C(o.current,n.current,h)):(window.removeEventListener("mouseup",O),window.removeEventListener("keyup",j),g()),function(){window.removeEventListener("mouseup",O),window.removeEventListener("keyup",j),g()}},[l]),{dropdownMenuElement:n,dropdownRefElement:o,isOpen:l,closeDropdown:d,openDropdown:w,toggleDropdown:E,updatePopper:k}},I=a.forwardRef(function(e,o){var n,f=e.allowCreateOptions,l=e.ariaCleanerLabel,s=l===void 0?"Clear all selections":l,v=e.className,p=e.cleaner,C=p===void 0?!0:p,g=e.clearSearchOnSelect,h=e.container,d=e.disabled,w=e.feedback,E=e.feedbackInvalid,k=e.feedbackValid,j=e.id,O=e.invalid,c=e.label,x=e.loading,N=e.multiple,b=N===void 0?!0:N,z=e.name,J=e.onChange,K=e.onFilterChange,te=e.onHide,Q=e.onShow,V=e.options,re=e.optionsMaxHeight,ne=re===void 0?"auto":re,le=e.optionsStyle,ie=le===void 0?"checkbox":le,se=e.optionsTemplate,A=e.optionsGroupsTemplate,D=e.placeholder,H=D===void 0?"Select...":D,ye=e.portal,ce=ye===void 0?!1:ye,$e=e.required,Se=e.resetSelectionOnOptionsChange,_e=Se===void 0?!1:Se,we=e.search,W=we===void 0?!0:we,xe=e.searchNoResultsLabel,et=xe===void 0?"No results found":xe,Ce=e.selectAll,tt=Ce===void 0?!0:Ce,Ee=e.selectAllLabel,rt=Ee===void 0?"Select all options":Ee,Te=e.selectionType,ue=Te===void 0?"tags":Te,ke=e.selectionTypeCounterText,Oe=ke===void 0?"item(s) selected":ke,Ne=e.size,nt=e.text,lt=e.tooltipFeedback,Re=e.valid,ot=e.virtualScroller,De=e.visible,je=De===void 0?!1:De,Le=e.visibleItems,at=Le===void 0?10:Le,it=ae(e,["allowCreateOptions","ariaCleanerLabel","className","cleaner","clearSearchOnSelect","container","disabled","feedback","feedbackInvalid","feedbackValid","id","invalid","label","loading","multiple","name","onChange","onFilterChange","onHide","onShow","options","optionsMaxHeight","optionsStyle","optionsTemplate","optionsGroupsTemplate","placeholder","portal","required","resetSelectionOnOptionsChange","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","size","text","tooltipFeedback","valid","virtualScroller","visible","visibleItems"]),G=Tt(),U=G.dropdownMenuElement,fe=G.dropdownRefElement,F=G.isOpen,Me=G.closeDropdown,oe=G.openDropdown,st=G.toggleDropdown,ct=G.updatePopper,pe=a.useRef(null),S=a.useRef(null),de=a.useRef(!0),Ie=a.useState(""),R=Ie[0],X=Ie[1],Ae=a.useState([]),m=Ae[0],L=Ae[1],He=a.useState([]),B=He[0],Pe=He[1],Z=a.useMemo(function(){return Ye(Ct(W)?y(y([],V,!0),We(R,B),!0):We(R,y(y([],V,!0),B,!0)),!0)},[V,R,B]),$=a.useMemo(function(){return Ye(V)},[V]),_=a.useMemo(function(){return f&&Z.some(function(r){return r.label&&r.label.toLowerCase()===R.toLowerCase()})?!1:S.current&&St(String(R),$)},[Z,R]);a.useEffect(function(){if(_e)return L([]);var r=$.filter(function(P){return P.selected===!0}),T=$.filter(function(P){return P.selected===!1});r.length>0&&L(Qe(b,r,m,T))},[$]),a.useEffect(function(){!de.current&&K&&K(R)},[R]),a.useEffect(function(){!de.current&&pe.current&&pe.current.dispatchEvent(new Event("change",{bubbles:!0})),ct()},[JSON.stringify(m)]),a.useEffect(function(){je?oe():Me()},[je]),a.useEffect(function(){var r;return F&&(Q&&Q(),ce&&U.current&&fe.current&&(U.current.style.minWidth="".concat(fe.current.offsetWidth,"px")),(r=S.current)===null||r===void 0||r.focus()),function(){te&&te(),X(""),S.current&&(S.current.value="")}},[F]),a.useEffect(function(){de.current=!1},[]);var ut=function(r){X(r.target.value)},ft=function(r){if(F||oe(),r.key==="ArrowDown"&&U.current&&S.current&&S.current.value.length===S.current.selectionStart){r.preventDefault();var T=Je(U.current),P=r.target;ze(T,P,r.key==="ArrowDown",!T.includes(P)).focus();return}if(r.key==="Enter"&&R&&f){r.preventDefault(),_&&(L(y(y([],m,!0),_,!0)),Pe(y(y([],B,!0),_,!0))),_||L(y(y([],m,!0),[Z.find(function(ee){return String(ee.label).toLowerCase()===R.toLowerCase()})],!1)),X(""),S.current&&(S.current.value="");return}if(!(R.length>0)&&(r.key==="Backspace"||r.key==="Delete")){var Ke=m.filter(function(ee){return!ee.disabled}).pop();Ke&&L(m.filter(function(ee){return ee.value!==Ke.value}))}},pt=function(r){if(!F&&(r.key==="Enter"||r.key==="ArrowDown")){r.preventDefault(),oe();return}if(F&&U.current&&r.key==="ArrowDown"){r.preventDefault();var T=Je(U.current),P=r.target;ze(T,P,r.key==="ArrowDown",!T.includes(P)).focus()}},qe=function(r){Et(W)&&S.current&&(r.key.length===1||r.key==="Backspace"||r.key==="Delete")&&S.current.focus()},Fe=function(r){if(!b){L([r]),Me(),X(""),S.current&&(S.current.value="");return}r.custom&&!B.some(function(T){return T.value===r.value})&&Pe(y(y([],B,!0),[r],!1)),(g||r.custom)&&(X(""),S.current&&(S.current.value="",S.current.focus())),m.some(function(T){return T.value===r.value})?L(m.filter(function(T){return T.value!==r.value})):L(y(y([],m,!0),[r],!1))},dt=function(){L(Qe(b,y(y([],$.filter(function(r){return!r.disabled}),!0),B,!0),m))},mt=function(){L(m.filter(function(r){return r.disabled}))};return i.createElement(Xe,{describedby:it["aria-describedby"],feedback:w,feedbackInvalid:E,feedbackValid:k,id:j,invalid:O,label:c,text:nt,tooltipFeedback:lt,valid:Re},i.createElement(ve,{id:j,multiple:b,name:z,options:m,required:$e,value:b?m.map(function(r){return r.value.toString()}):m.map(function(r){return r.value})[0],onChange:function(){return J&&J(m)},ref:pe}),i.createElement("div",{className:Y("form-multi-select",(n={},n["form-multi-select-".concat(Ne)]=Ne,n.disabled=d,n["is-invalid"]=O,n["is-valid"]=Re,n.show=F,n),v),onKeyDown:qe,"aria-expanded":F,ref:o},i.createElement("div",q({className:"form-multi-select-input-group"},!W&&!d&&{tabIndex:0},{onClick:function(){return!d&&oe()},onKeyDown:pt,ref:fe}),i.createElement(ge,{disabled:d,multiple:b,onRemove:function(r){return!d&&Fe(r)},placeholder:H,search:W,selected:m,selectionType:ue,selectionTypeCounterText:Oe},W&&i.createElement("input",q({type:"text",className:"form-multi-select-search",disabled:d,autoComplete:"off",onChange:ut,onKeyDown:ft},m.length===0&&{placeholder:H},m.length>0&&ue==="counter"&&{placeholder:"".concat(m.length," ").concat(Oe)},m.length>0&&!b&&{placeholder:m.map(function(r){return r.label})[0]},b&&m.length>0&&ue!=="counter"&&{size:R.length+2},{ref:S})),!W&&m.length===0&&i.createElement("span",{className:"form-multi-select-placeholder"},H)),i.createElement("div",{className:"form-multi-select-buttons"},!d&&C&&m.length>0&&i.createElement("button",{type:"button",className:"form-multi-select-cleaner",onClick:function(){return mt()},"aria-label":s}),i.createElement("button",q({type:"button",className:"form-multi-select-indicator",onClick:function(r){r.preventDefault(),r.stopPropagation(),d||st()}},d&&{tabIndex:-1})))),i.createElement(ht,{container:h,portal:ce},i.createElement("div",{className:Y("form-multi-select-dropdown",{show:ce&&F}),onKeyDown:qe,role:"menu",ref:U},b&&tt&&i.createElement("button",{type:"button",className:"form-multi-select-all",onClick:function(){return dt()}},rt),i.createElement(he,{loading:x,onOptionOnClick:function(r){return!d&&Fe(r)},options:Z.length===0&&f?_||[]:Z,optionsMaxHeight:ne,optionsStyle:ie,optionsTemplate:se,optionsGroupsTemplate:A,searchNoResultsLabel:et,selected:m,virtualScroller:ot,visibleItems:at})))))});I.propTypes=q({allowCreateOptions:t.bool,ariaCleanerLabel:t.string,className:t.string,cleaner:t.bool,clearSearchOnSelect:t.bool,container:t.any,disabled:t.bool,loading:t.bool,multiple:t.bool,name:t.string,onChange:t.func,onFilterChange:t.func,onHide:t.func,onShow:t.func,options:t.array.isRequired,optionsMaxHeight:t.oneOfType([t.number,t.string]),optionsStyle:t.oneOf(["checkbox","text"]),optionsTemplate:t.func,optionsGroupsTemplate:t.func,placeholder:t.string,portal:t.bool,required:t.bool,resetSelectionOnOptionsChange:t.bool,search:t.oneOfType([t.bool,t.oneOf(["external","global"]),t.shape({external:t.bool.isRequired,global:t.bool.isRequired})]),searchNoResultsLabel:t.oneOfType([t.string,t.node]),selectAll:t.bool,selectAllLabel:t.oneOfType([t.string,t.node]),selectionType:t.oneOf(["counter","tags","text"]),selectionTypeCounterText:t.string,size:t.oneOf(["sm","lg"]),virtualScroller:t.bool,visible:t.bool,visibleItems:t.number},Xe.propTypes);I.displayName="CMultiSelect";const At=()=>{const e=[{value:0,label:"Angular"},{value:1,label:"Bootstrap"},{value:2,label:"React.js",selected:!0},{value:3,label:"Vue.js"},{label:"backend",options:[{value:4,label:"Django"},{value:5,label:"Laravel"},{value:6,label:"Node.js"}]}];return u.jsxs(me,{children:[u.jsx(M,{xs:12,children:u.jsxs(Ge,{className:"mb-4",children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"CoreUI React Multi Select"})," ",u.jsx("small",{children:"with Checkbox (Default Style)"})]}),u.jsx(Ue,{children:u.jsx(Ve,{href:"forms/multi-select",children:u.jsxs(me,{children:[u.jsx(M,{md:3,children:u.jsx(I,{options:e,multiple:!1})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,selectionType:"text"})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,selectionType:"tags"})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,selectionType:"counter"})})]})})})]})}),u.jsx(M,{xs:12,children:u.jsxs(Ge,{className:"mb-4",children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"CoreUI React Multi Select"})," ",u.jsx("small",{children:"with Text"})]}),u.jsx(Ue,{children:u.jsx(Ve,{href:"forms/multi-select",children:u.jsxs(me,{children:[u.jsx(M,{md:3,children:u.jsx(I,{options:e,optionsStyle:"text",multiple:!1})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,optionsStyle:"text",selectionType:"text"})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,optionsStyle:"text",selectionType:"tags"})}),u.jsx(M,{md:3,children:u.jsx(I,{options:e,optionsStyle:"text",selectionType:"counter"})})]})})})]})})]})};export{At as default};
